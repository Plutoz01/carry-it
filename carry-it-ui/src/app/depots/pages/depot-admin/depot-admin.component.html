<ci-master-detail
	[listItemTemplate]="depotItemTpl"
	[listTrackByFn]="depotTrackByFn"
	[selected]="depotDetailsItem$ | async"
	[detailsItem]="depotDetailsItem$ | async"
	[detailsTemplate]="depotDetailsTpl"
	(selectionChange)="onSelectionChange($event)"
></ci-master-detail>

<ng-template #depotItemTpl let-depot let-isSelected="isSelected">
	<label [ngClass]="{ 'font-weight-bold': isSelected }">{{depot.name}}</label>
	<span class="badge badge-pill badge-info ml-2">{{depot?.vehicleCount || 0}} vehicle(s)</span>
</ng-template>

<ng-template #depotDetailsTpl let-depot>
	<ci-depot-edit-form [depot]="depot" (save)="onSave($event)"></ci-depot-edit-form>
</ng-template>

<ci-overlay-container *ngIf="isLoading$ | async">
	<div class="loading-dialog">
		<fa-icon [icon]="spinnerIcon" [spin]="true" size="10x"></fa-icon>
	</div>
</ci-overlay-container>